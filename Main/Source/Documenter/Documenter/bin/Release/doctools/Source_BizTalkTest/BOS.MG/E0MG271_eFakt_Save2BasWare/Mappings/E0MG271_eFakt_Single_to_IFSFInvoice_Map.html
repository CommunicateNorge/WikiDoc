<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>
					Map To ..\Schemas\IFSFinvoice.xsd</title>
<style type="text/css">
					/*
					Branding Colour palette.
					Blue light				R:070 G:155 B:200	#469bc8
					Blue dark				R:050 G:075 B:118	#324b76
					Shade 1	(dark mauve)	R:129 G:158 B:187	#819ebb
					Shade 2	(mauve)			R:174 G:200 B:216	#aec8d8
					Shade 3	(light mauve)	R:215 G:231 B:239	#d7e7ef
					Grey dark				R:070 G:070 B:070	#464646
					Grey medium				R:165 G:165 B:165	#a5a5a5
					Grey light				R:190 G:190 B:190	#bcbfbe
					*/

					body	{ font-family: Arial }
					hr		{ border: 0; height: 2px; width: 100%; }
					table	{ width: 100%; font-size: small; }
					th		{ color: white;	background-color: #324b76; text-align: left;}
					h1		{ color: #469bc8; font-family: Arial; }
					h2		{ color: #324b76; font-family: Arial; }
					h3		{ color: #464646; font-family: Arial; }

					#pageTitle { color: #469bc8; font-size: 20px; font-weight: bold }

					.titleArea { border-left: 5px solid #333366; padding-left: 5px }
					.titleSchema { color: #324b76; font-size: 14px; font-weight: bold }
					.linkTableAltRow { 	background-color: #ededed; }
					.linkTableDiffNodeRow { background-color: #C8E2FF }
					.linkTableCol { border-bottom: 1px solid black; background-color: #CCCC99 }
					.functoidArea { font-family: Lucida Console, Courier New; font-size: 11px }
					.functoidName { color: blue }
					.functoidBracket { color: green; font-weight: bold }
					.functoidScript { color: #003300 }
					.paramComma { color: blue; font-weight: bold }
					.internalLink { font-size: 10px }
					.collapseref { font-size: 10px; cursor:pointer }
				</style>
</head>
<body>
<a name="top"></a>
<div class="titleArea">
<h1>BizTalk Map Documentation</h1>
<table border="0">
<tr class="titleSchema">
<td>From Schema(s):</td>
<td>..\Schemas\E0MG271_eFakt_Single.xsd</td>
</tr>
<tr class="titleSchema">
<td>To Schema:</td>
<td>..\Schemas\IFSFinvoice.xsd</td>
</tr>
</table>
</div>
<a href="#functoids" class="internalLink">Functoids</a>
<a href="#constantvalues" class="internalLink">Constant Values</a>
<hr />
<h2>Direct Node-to-Node Links (No Functoids)</h2>
<h3>Page 1: Page 1</h3>
<p>
<a id="pageDirect1Anchor" onclick="toggleCollapse('pageDirect1', 'pageDirect1Anchor');" title="Collapse" class="collapseref">Collapse</a>
</p>
<div id="pageDirect1">
<table>
<tr>
<th width="40%">From</th>
<th width="40%">To</th>
<th width="20%">Label</th>
</tr>
<tr>
<td>efaktura_rec/efakth_rec/efakth_giro_nr</td>
<td>IFSFinvoice/SellerInformationDetails/SellerAccountDetails/SellerAccountID</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>efaktura_rec/efakth_rec/efakth_giro_nr</td>
<td>IFSFinvoice/EpiDetails/EpiPartyDetails/EpiBeneficiaryPartyDetails/EpiAccountID</td>
<td></td>
</tr>
</table>
</div>
<hr />
<a name="functoids"></a>
<span style="font-size: 12px">^†</span>
<a href="#top" class="internalLink">Top</a>
<br />
<br />
<h2>Functoid Mappings</h2>
<h3>Page 1: Page 1</h3>
<p>
<a id="pageFunctoids1Anchor" onclick="toggleCollapse('pageFunctoids1', 'pageFunctoids1Anchor');" title="Collapse" class="collapseref">Collapse</a>
</p>
<div id="pageFunctoids1">
<table>
<tr>
<th width="40%">Functoid Sequence</th>
<th width="40%">Destination Node</th>
<th width="20%">Labels</th>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.LineToFieldSplitter.Initialize</span>
</div>
</td>
<td>IFSFinvoice</td>
<td>Initialize LineFormats<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.LineToFieldSplitter.GetField</span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowFreeText</td>
<td>GetField(RowFreeText)<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowFreeText</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowDiscountPercent</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/UnitPriceAmount</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowDeliveryDate</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.LineToFieldSplitter.GetField</span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowDeliveryDate</td>
<td>GetField(RowDeliveryDate)<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/OriginalInvoiceNumber</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.LineToFieldSplitter.GetField</span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/OriginalInvoiceNumber</td>
<td>GetField(OriginalInvoiceNumber)<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string Trim(string param)
{
   return param.Trim();
}</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceNumber</td>
<td>Trim string<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string Trim(string param)
{
   return param.Trim();
}</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceDate</td>
<td>Trim string<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string Trim(string param)
{
   return param.Trim();
}</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/PaymentTermsDetails/InvoiceDueDate</td>
<td>Trim string<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string Trim(string param)
{
   return param.Trim();
}</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/BuyerPartyDetails/BuyerOrganisationName</td>
<td>Trim string<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />///*Uncomment the following code for a sample Inline C# function
//that concatenates two inputs. Change the number of parameters of
//this function to be equal to the number of inputs connected to this functoid.*/

public string splitpost(string param1)
        {
            System.Text.RegularExpressions.Match m = System.Text.RegularExpressions.Regex.Match(param1, @"(?&lt;town&gt;[a-zA-ZÊ¯Â∆ÿ≈]+)");
            if (m.Success)
            {
                return m.Groups["town"].Value;
            }
            return "";
        }
</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/BuyerPartyDetails/BuyerPostalAddressDetails/BuyerTownName</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />///*Uncomment the following code for a sample Inline C# function
//that concatenates two inputs. Change the number of parameters of
//this function to be equal to the number of inputs connected to this functoid.*/

public string splitpost2(string param1)
        {
            System.Text.RegularExpressions.Match m = System.Text.RegularExpressions.Regex.Match(param1, @"(?&lt;code&gt;\d{4})");
            if (m.Success)
            {
                return m.Groups["code"].Value;
            }
            return "";
        }</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/BuyerPartyDetails/BuyerPostalAddressDetails/BuyerPostCodeIdentifier</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceTotalVatExcludedAmount</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/BuyerPartyDetails/BuyerPostalAddressDetails/BuyerStreetName</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/BuyerPartyDetails/BuyerOrganisationName</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceNumber</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceDate</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceTotalVatAmount</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceTotalVatIncludedAmount</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/PaymentTermsDetails/InvoiceDueDate</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/BuyerPartyDetails/BuyerPostalAddressDetails/BuyerTownName</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/BuyerPartyDetails/BuyerPostalAddressDetails/BuyerPostCodeIdentifier</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.LineToFieldSplitter.ClearLineFormat</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/SubInvoiceRow</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/SubInvoiceRow</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowAmount</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.IFSLookup.ReadSupplierName</span>
</div>
</td>
<td>IFSFinvoice/SellerPartyDetails/SellerOrganisationName</td>
<td>SupplierName<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.IFSLookup.GetSupplierFromIFS</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/SellerPartyDetails</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/SellerPartyDetails</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.IFSLookup.ReadSupplierCity</span>
</div>
</td>
<td>IFSFinvoice/SellerPartyDetails/SellerPostalAddressDetails/SellerTownName</td>
<td>SupplierCity<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.IFSLookup.ReadSupplierZipCode</span>
</div>
</td>
<td>IFSFinvoice/SellerPartyDetails/SellerPostalAddressDetails/SellerPostCodeIdentifier</td>
<td>SuuplierZipCode<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string ConcatAddress(string address1, string address2)
        {
            if (string.IsNullOrEmpty(address1) || address1.Equals("."))
            {
                return address2;
            }
            else if (string.IsNullOrEmpty(address2))
            {
                return address1;
            }
            else
            {
                return address1 + " " + address2;
            }
        }</span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/SellerPartyDetails/SellerPostalAddressDetails/SellerStreetName</td>
<td>SupplierAddress<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.IFSLookup.ReadSupplierCountryCode</span>
</div>
</td>
<td>IFSFinvoice/SellerPartyDetails/SellerPostalAddressDetails/CountryCode</td>
<td>SuuplierZipCode<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.IFSLookup.ReadSupplierCountryName</span>
</div>
</td>
<td>IFSFinvoice/SellerPartyDetails/SellerPostalAddressDetails/CountryName</td>
<td>SuuplierZipCode<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public static string RelocateSignAndSwitchDecimal(string value)
        {
            // Relocate the minus sign.
            if (value.EndsWith("-"))
            {
                decimal tmp;
                string rawValue = value.Substring(0, value.LastIndexOf("-"));
                value = "-" + rawValue;             
            }

            // Remove thousands separators from the value.
            if (value.Contains(","))
            {
                value = value.Replace(",", "");
            }
            
            // Switch value format to use (,) comma as decimal separator instead of (.) dot.
            if (value.Contains("."))
            {
                value = value.Replace(".", ",");
            }

            return value;
        }</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/UnitPriceAmount</td>
<td>GetField(UnitPriceAmount) FixedSign<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public static string RelocateSignAndSwitchDecimal(string value)
        {
            // Relocate the minus sign.
            if (value.EndsWith("-"))
            {
                decimal tmp;
                string rawValue = value.Substring(0, value.LastIndexOf("-"));
                if (decimal.TryParse(rawValue, out tmp))
                {
                    value = "-" + rawValue;
                }
            }

            // Remove thousands separators from the value.
            if (value.Contains(","))
            {
                value = value.Replace(",", "");
            }
            
            // Switch value format to use (,) comma as decimal separator instead of (.) dot.
            if (value.Contains("."))
            {
                value = value.Replace(".", ",");
            }

            return value;
        }</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowAmount</td>
<td>GetField(DiscountPercent) FixedSign<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public decimal CalculateDiscountPercent(string unitPrice, string discount)
        {
            decimal discountPercent = 0;

            if (!string.IsNullOrEmpty(unitPrice) &amp;&amp; !string.IsNullOrEmpty(discount))
            {
                decimal unitPriceParsed;
                decimal discountParsed;

                // unitPrice is received as a thousandseparated number. 
                if (unitPrice.Contains(".") &amp;&amp; unitPrice.Contains(","))
                {
                    // Checking also if (.) is for decimals and (,) is for thousands
                    if (unitPrice.LastIndexOf(".") &gt; unitPrice.LastIndexOf(","))
                    {
                        unitPrice = unitPrice.Replace(",", "");
                    }

                    // if (.) is for thousand separation and (,) is for decimals
                    if (unitPrice.LastIndexOf(".") &lt; unitPrice.LastIndexOf(","))
                    {
                        unitPrice = unitPrice.Replace(".", "");
                        unitPrice = unitPrice.Replace(",", ".");
                    }
                }
                if (unitPrice.Contains(",") &amp;&amp; !unitPrice.Contains("."))
                {
                    unitPrice = unitPrice.Replace(",", ".");
                }

                // discount is received as a thousandseparated number. 
                if (discount.Contains(".") &amp;&amp; discount.Contains(","))
                {
                    // Checking also if (.) is for decimals and (,) is for thousands
                    if (discount.LastIndexOf(".") &gt; discount.LastIndexOf(","))
                    {
                        discount = discount.Replace(",", "");
                    }

                    // if (.) is for thousand separation and (,) is for decimals
                    if (discount.LastIndexOf(".") &lt; discount.LastIndexOf(","))
                    {
                        discount = discount.Replace(".", "");
                        discount = discount.Replace(",", ".");
                    }
                }
                if (discount.Contains(",") &amp;&amp; !discount.Contains("."))
                {
                    discount = discount.Replace(",", ".");
                }

                if (decimal.TryParse(unitPrice, out unitPriceParsed) &amp;&amp;
                    decimal.TryParse(discount, out discountParsed))
                {
                    discountPercent = (discountParsed / unitPriceParsed) * 100;
                }
            }

            // Uses Banker's rounding to round up/down to an even number. FInvoice specifies three decimal places as max in the RowDiscou. See: http://www.xbeat.net/vbspeed/i_BankersRounding.htm
            return decimal.Round(discountPercent, 3, MidpointRounding.ToEven);
        }</span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowDiscountPercent</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.IFSLookup.ReadSupplierAssociationNo</span>
</div>
</td>
<td>IFSFinvoice/SellerPartyDetails/SellerPartyIdentifier</td>
<td>SupplierName<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string ConcatAddress(string address1, string address2)
        {
            if (string.IsNullOrEmpty(address1) || address1.Equals("."))
            {
                return address2.Trim();
            }
            else if (string.IsNullOrEmpty(address2))
            {
                return address1.Trim();
            }
            else
            {
                return address1.Trim() + " " + address2.Trim();
            }
        }</span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/BuyerPartyDetails/BuyerPostalAddressDetails/BuyerStreetName</td>
<td>SupplierAddress<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/ArticleName</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.LineToFieldSplitter.GetField</span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/ArticleName</td>
<td>GetField(OrderedQuantity)<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/BuyerPartyDetails/BuyerPartyIdentifier</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.Common.GetRowSubIdentifier</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowSubIdentifier</td>
<td>Counter<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public static string RelocateSignAndSwitchDecimal(string value)
        {
            // Relocate the minus sign.
            if (value.EndsWith("-"))
            {
                decimal tmp;
                string rawValue = value.Substring(0, value.LastIndexOf("-"));
                if (decimal.TryParse(rawValue, out tmp))
                {
                    value = "-" + rawValue;
                }
            }

            // Remove thousands separators from the value.
            if (value.Contains(","))
            {
                value = value.Replace(",", "");
            }
            
            // Switch value format to use (,) comma as decimal separator instead of (.) dot.
            if (value.Contains("."))
            {
                value = value.Replace(".", ",");
            }

            return value;
        }</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/DeliveredQuantity</td>
<td>GetField(UnitPriceAmount) FixedSign<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/DeliveredQuantity</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.Common.GetRowDateFormat</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowDeliveryDate/Format</td>
<td>RowDeliveryDateFormat<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string GetAmountCurrencyIdentifier(bool valueExists)
{
   if (valueExists)
   {
      return "NOK";
   }
   return "";
}</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowAmount/AmountCurrencyIdentifier</td>
<td>AmountCurrencyIdentifier<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string GetAmountCurrencyIdentifier(bool valueExists)
{
   if (valueExists)
   {
      return "NOK";
   }
   return "";
}</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/UnitPriceAmount/AmountCurrencyIdentifier</td>
<td>AmountCurrencyIdentifier<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string GetAmountCurrencyIdentifier(bool valueExists)
{
   if (valueExists)
   {
      return "NOK";
   }
   return "";
}</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceTotalVatExcludedAmount/AmountCurrencyIdentifier</td>
<td>AmountCurrencyIdentifier<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string GetAmountCurrencyIdentifier(bool valueExists)
{
   if (valueExists)
   {
      return "NOK";
   }
   return "";
}</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/VatSpecificationDetails/VatBaseAmount/AmountCurrencyIdentifier</td>
<td>AmountCurrencyIdentifier<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string GetAmountCurrencyIdentifier(bool valueExists)
{
   if (valueExists)
   {
      return "NOK";
   }
   return "";
}</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceTotalVatAmount/AmountCurrencyIdentifier</td>
<td>AmountCurrencyIdentifier<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string GetAmountCurrencyIdentifier(bool valueExists)
{
   if (valueExists)
   {
      return "NOK";
   }
   return "";
}</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceTotalVatIncludedAmount/AmountCurrencyIdentifier</td>
<td>AmountCurrencyIdentifier<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string GetAmountCurrencyIdentifier(bool valueExists)
{
   if (valueExists)
   {
      return "NOK";
   }
   return "";
}</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/VatSpecificationDetails/VatRateAmount/AmountCurrencyIdentifier</td>
<td>AmountCurrencyIdentifier<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.Common.GenerateKIDNo</span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/EpiDetails/EpiIdentificationDetails/EpiReference</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string TrimString(string str)
{
   return str.Trim();
}
</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/EpiDetails/EpiIdentificationDetails/EpiDate</td>
<td>Trim InvoiceDate<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string Trim(string param)
{
   return param.Trim();
}</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/EpiDetails/EpiPaymentInstructionDetails/EpiDateOptionDate</td>
<td>Trim string<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/EpiDetails/EpiPaymentInstructionDetails/EpiDateOptionDate</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/VatSpecificationDetails/VatBaseAmount</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/VatSpecificationDetails/VatRateAmount</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/VatSpecificationDetails</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.LineToFieldSplitter.GetField</span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/ArticleIdentifier</td>
<td>GetField(OrderedQuantity)<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/ArticleIdentifier</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public static string RelocateSignAndSwitchDecimal(string value)
        {
            // Relocate the minus sign.
            if (value.EndsWith("-"))
            {
                decimal tmp;
                string rawValue = value.Substring(0, value.LastIndexOf("-"));
                if (decimal.TryParse(rawValue, out tmp))
                {
                    value = "-" + rawValue;
                }
            }

            // Remove thousands separators from the value.
            if (value.Contains(","))
            {
                value = value.Replace(",", "");
            }
            
            // Switch value format to use (,) comma as decimal separator instead of (.) dot.
            if (value.Contains("."))
            {
                value = value.Replace(".", ",");
            }

            return value;
        }</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceTotalVatIncludedAmount</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public static string RelocateSignAndSwitchDecimal(string value)
        {
            // Relocate the minus sign.
            if (value.EndsWith("-"))
            {
                decimal tmp;
                string rawValue = value.Substring(0, value.LastIndexOf("-"));
                if (decimal.TryParse(rawValue, out tmp))
                {
                    value = "-" + rawValue;
                }
            }

            // Remove thousands separators from the value.
            if (value.Contains(","))
            {
                value = value.Replace(",", "");
            }
            
            // Switch value format to use (,) comma as decimal separator instead of (.) dot.
            if (value.Contains("."))
            {
                value = value.Replace(".", ",");
            }

            return value;
        }</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceTotalVatAmount</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public static string RelocateSignAndSwitchDecimal(string value)
        {
            // Relocate the minus sign.
            if (value.EndsWith("-"))
            {
                decimal tmp;
                string rawValue = value.Substring(0, value.LastIndexOf("-"));
                if (decimal.TryParse(rawValue, out tmp))
                {
                    value = "-" + rawValue;
                }
            }

            // Remove thousands separators from the value.
            if (value.Contains(","))
            {
                value = value.Replace(",", "");
            }
            
            // Switch value format to use (,) comma as decimal separator instead of (.) dot.
            if (value.Contains("."))
            {
                value = value.Replace(".", ",");
            }

            return value;
        }</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/VatSpecificationDetails/VatRateAmount</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public static string RelocateSignAndSwitchDecimal(string value)
        {
            // Relocate the minus sign.
            if (value.EndsWith("-"))
            {
                decimal tmp;
                string rawValue = value.Substring(0, value.LastIndexOf("-"));
                if (decimal.TryParse(rawValue, out tmp))
                {
                    value = "-" + rawValue;
                }
            }

            // Remove thousands separators from the value.
            if (value.Contains(","))
            {
                value = value.Replace(",", "");
            }
            
            // Switch value format to use (,) comma as decimal separator instead of (.) dot.
            if (value.Contains("."))
            {
                value = value.Replace(".", ",");
            }

            return value;
        }</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/VatSpecificationDetails/VatBaseAmount</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public static string RelocateSignAndSwitchDecimal(string value)
        {
            // Relocate the minus sign.
            if (value.EndsWith("-"))
            {
                decimal tmp;
                string rawValue = value.Substring(0, value.LastIndexOf("-"));
                if (decimal.TryParse(rawValue, out tmp))
                {
                    value = "-" + rawValue;
                }
            }

            // Remove thousands separators from the value.
            if (value.Contains(","))
            {
                value = value.Replace(",", "");
            }
            
            // Switch value format to use (,) comma as decimal separator instead of (.) dot.
            if (value.Contains("."))
            {
                value = value.Replace(".", ",");
            }

            return value;
        }</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceTotalVatExcludedAmount</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowIdentifierDate</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.LineToFieldSplitter.GetField</span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowIdentifierDate</td>
<td>GetField(RowDeliveryDate)<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />E0MG271_Common.Common.GetRowDateFormat</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow/RowIdentifierDate/Format</td>
<td>RowDeliveryDateFormat<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string MapInvoiceTypeCode(string efakth_fakt_type)
{
   switch(efakth_fakt_type)
   {
      case "X": return "INV01";
      case "Y": return "INV02";
      case "Z": return "INV03";
      default: return "NA";
   }
}
</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceTypeCode</td>
<td>InvoiceTypeCode<br /></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string MapInvoiceTypeText(string invoice_type_code)
{
   switch( invoice_type_code)
   {
      case "INV01": return "INVOICE";
      case "INV02": return "CREDIT INVOICE";
      case "INV03": return "INTEREST INVOICE";
      default: return "NOT AVAILABLE";
   }
}
</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceTypeText</td>
<td>InvoiceTypeText<br /></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceTypeCode/CodeListAgencyIdentifier</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/EpiDetails/EpiIdentificationDetails/EpiDate/Format</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/EpiDetails/EpiPaymentInstructionDetails/EpiDateOptionDate/Format</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/PaymentTermsDetails/InvoiceDueDate/Format</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/InvoiceDate/Format</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/BuyerPartyDetails/BuyerPostalAddressDetails/CountryName</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/BuyerPartyDetails/BuyerPostalAddressDetails/CountryCode</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/EpiDetails/EpiPartyDetails/EpiBeneficiaryPartyDetails/EpiAccountID/IdentificationSchemeName</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/SellerInformationDetails/SellerAccountDetails/SellerAccountID/IdentificationSchemeName</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/InvoiceDetails/VatSpecificationDetails/VatRatePercent</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/InvoiceRow</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>IFSFinvoice/BuyerContactPersonName</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>IFSFinvoice/BuyerContactPersonName</td>
<td></td>
</tr>
</table>
</div>
<hr />
<a name="constantvalues"></a>
<span style="font-size: 12px">^†</span>
<a href="#top" class="internalLink">Top</a>
<br />
<br />
<h2>Constant Values</h2>
<p>
<a id="constant1ValuesAnchor" onclick="toggleCollapse('constant1Values', 'constant1ValuesAnchor');" title="Collapse" class="collapseref">Collapse</a>
</p>
<div id="constant1Values">
<table>
<tr>
<th width="40%">Value</th>
<th width="60%">Destination Node</th>
</tr>
</table>
</div>
</body>
<script type="text/javascript">
				
	function toggleCollapse(obj, objAnchor) {
	var el = document.getElementById(obj);
	var elAnchor = document.getElementById(objAnchor);
	if ( el.style.display != "none" ) {
	  el.style.display = 'none';
	  elAnchor.innerHTML = 'Expand';
	}
	else {
	  el.style.display = '';
	  elAnchor.innerHTML = 'Collapse';
	}
	}
	
				</script>
</html>
