<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>
					Map To ..\Schemas\PEU_PartsOrder.xsd</title>
<style type="text/css">
					/*
					Branding Colour palette.
					Blue light				R:070 G:155 B:200	#469bc8
					Blue dark				R:050 G:075 B:118	#324b76
					Shade 1	(dark mauve)	R:129 G:158 B:187	#819ebb
					Shade 2	(mauve)			R:174 G:200 B:216	#aec8d8
					Shade 3	(light mauve)	R:215 G:231 B:239	#d7e7ef
					Grey dark				R:070 G:070 B:070	#464646
					Grey medium				R:165 G:165 B:165	#a5a5a5
					Grey light				R:190 G:190 B:190	#bcbfbe
					*/

					body	{ font-family: Arial }
					hr		{ border: 0; height: 2px; width: 100%; }
					table	{ width: 100%; font-size: small; }
					th		{ color: white;	background-color: #324b76; text-align: left;}
					h1		{ color: #469bc8; font-family: Arial; }
					h2		{ color: #324b76; font-family: Arial; }
					h3		{ color: #464646; font-family: Arial; }

					#pageTitle { color: #469bc8; font-size: 20px; font-weight: bold }

					.titleArea { border-left: 5px solid #333366; padding-left: 5px }
					.titleSchema { color: #324b76; font-size: 14px; font-weight: bold }
					.linkTableAltRow { 	background-color: #ededed; }
					.linkTableDiffNodeRow { background-color: #C8E2FF }
					.linkTableCol { border-bottom: 1px solid black; background-color: #CCCC99 }
					.functoidArea { font-family: Lucida Console, Courier New; font-size: 11px }
					.functoidName { color: blue }
					.functoidBracket { color: green; font-weight: bold }
					.functoidScript { color: #003300 }
					.paramComma { color: blue; font-weight: bold }
					.internalLink { font-size: 10px }
					.collapseref { font-size: 10px; cursor:pointer }
				</style>
</head>
<body>
<a name="top"></a>
<div class="titleArea">
<h1>BizTalk Map Documentation</h1>
<table border="0">
<tr class="titleSchema">
<td>From Schema(s):</td>
<td>..\Schemas\ServiceOperation Send Purchase Order Request XSD Schema.xsd</td>
</tr>
<tr class="titleSchema">
<td>To Schema:</td>
<td>..\Schemas\PEU_PartsOrder.xsd</td>
</tr>
</table>
</div>
<a href="#functoids" class="internalLink">Functoids</a>
<a href="#constantvalues" class="internalLink">Constant Values</a>
<hr />
<h2>Direct Node-to-Node Links (No Functoids)</h2>
<h3>Page 1: Page 1</h3>
<p>
<a id="pageDirect1Anchor" onclick="toggleCollapse('pageDirect1', 'pageDirect1Anchor');" title="Collapse" class="collapseref">Collapse</a>
</p>
<div id="pageDirect1">
<table>
<tr>
<th width="40%">From</th>
<th width="40%">To</th>
<th width="20%">Label</th>
</tr>
</table>
</div>
<hr />
<a name="functoids"></a>
<span style="font-size: 12px">^ </span>
<a href="#top" class="internalLink">Top</a>
<br />
<br />
<h2>Functoid Mappings</h2>
<h3>Page 1: Page 1</h3>
<p>
<a id="pageFunctoids1Anchor" onclick="toggleCollapse('pageFunctoids1', 'pageFunctoids1Anchor');" title="Collapse" class="collapseref">Collapse</a>
</p>
<div id="pageFunctoids1">
<table>
<tr>
<th width="40%">Functoid Sequence</th>
<th width="40%">Destination Node</th>
<th width="20%">Labels</th>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>PeuPartsOrders/Footer/FooterRecordCounts</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>PeuPartsOrders/OrderLine</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>PeuPartsOrders/Header/HeaderDate</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>PeuPartsOrders/HeaderOrder/HO_TransactionDate</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>PeuPartsOrders/OrderLine/OL_TransactionDate</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>PeuPartsOrders/OrderLine/OL_Quantity</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>PeuPartsOrders/Header/HeaderBatchnr</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>PeuPartsOrders/Footer/FooterBatchnr</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>PeuPartsOrders/HeaderOrder/HO_DeliveryMethod</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>PeuPartsOrders/HeaderOrder/HO_DeliveryMethod</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>PeuPartsOrders/HeaderOrder/HO_OrderNumber</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>PeuPartsOrders/OrderLine/OL_OrderNumber</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string mySetOrderType(string pVendorNo, string pRouteId)
{
// 20101014 Z003ATR
// Hei,
// Peugeot skal være 3 på lik linje med Citroen. Så det må endres.
// mvh AT
// 
// OrderType skal dermed ha verdi 1 for lagerordre og 3
// tidligere skulle Peugeot straksordre ha verdi 2
// **************************************************************

	string ot = "1";
	if (pRouteId != "LO")
	{
		switch (pVendorNo)
		{
			case "7999000":	// Peugeot
				ot = "3";
				break;
			case "7999002":	// Citroen
				ot = "3";
				break;
		}
	}
	return ot;
}</span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>PeuPartsOrders/HeaderOrder/HO_OrderType</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />public string PartnoConvertLeadingZeroToSpace(string pPartno)
{
	string s = pPartno;

	if (s.Length == 10 &amp;&amp; s.StartsWith("0000"))
		return s;

	char[] p = s.ToCharArray();
	int idx = 0;
	int len = s.Length - 6;
	while (idx &lt; len)
	{
		if (p[idx] != '0')
			break;
		p[idx++] = ' ';
	}
	return new string(p);
}</span>
<span class="functoidBracket">( </span>
<span class="functoidBracket"> )</span>
</div>
</td>
<td>PeuPartsOrders/OrderLine/OL_PartNumber</td>
<td></td>
</tr>
<tr>
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />// 20101025 Z003ATR
// Her er oversikten over de ulike kundenr utfra ordretype.
// Kjempefint om du får lagt i biztalk slik at kundenr endres utfra
// leverandør og anskaffelsesgrunn.
// **************************************************************
public string mySetHeaderCustomerNo(string pVendorNo, string pRouteId)
{
    string custNo = "03054";

    switch (pVendorNo)
    {
        case "7999000":	// Peugeot
            if (pRouteId == "SO")
                custNo = "03055";
            else
                custNo = "03054";
            break;
        case "7999002":	// Citroen
            if (pRouteId == "SO")
                custNo ="71648";  //Task1827                old: "71644"; //ID:1541, endret fra 71641; 
            else
                custNo ="71646";              // Task 1827    old:"71643"; //ID:1541, endret fra 71640; 
            break;
        default:
            custNo = "03054";
            break;
    }
    return custNo;
}</span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>PeuPartsOrders/HeaderOrder/HO_CustomerNumber</td>
<td></td>
</tr>
<tr class="linkTableAltRow">
<td>
<div class="functoidArea"><span class="functoidName"></span>
<span class="functoidScript"><br />

                // 02.04.2014 Tillegg for farlig gods
                // For Peugeot, 7999000 OL_CustomerNumber = 03064 for stock and VOR order
                // For Citroen, 7999002 OL_CustomerNumber = 71642 for stock and VOR order
                // Test på ORDER_LINE.OUR_ID fra IFS. Overstyr hvis verdien er 03064 || 71642 
                //ID:1541,  Lagt til et 3. if statement.
                // **************************************************************
                public string mySetOrderlineCustomerNo(string pVendorNo, string pCustNo, string pOId, string routeID)
                {
                    Int64 oIdNoResult = 0;

                    string custNo = pCustNo;

                    if (pVendorNo == "7999000" &amp;&amp; pOId == "03064")
                    {
                        custNo = pOId;
                    }


                    if (pVendorNo == "7999002" &amp;&amp; pOId == "71642") //ID:1541, Separerte ut legacy statement som var litt vanskelig å forstå funksjonen av.
                   {
                       custNo = pOId;
                   }

                  if (pVendorNo == "7999002" &amp;&amp; pCustNo == "71648" &amp;&amp; pOId=="71647" &amp;&amp; routeID == "SO")  //ID:1541, lagt til for å hånderer linje endring på SOFG
                    {
                        custNo = "71647";
                    }                   

                    return custNo;
                }
</span>
<br /><span class="functoidBracket">(</span>
<br />
<span class="paramComma">,</span>
<br />
<span class="paramComma">,</span>
<br />
<span class="paramComma">,</span>
<br />
<br /><span class="functoidBracket">)</span>
</div>
</td>
<td>PeuPartsOrders/OrderLine/OL_CustomerNumber</td>
<td></td>
</tr>
</table>
</div>
<hr />
<a name="constantvalues"></a>
<span style="font-size: 12px">^ </span>
<a href="#top" class="internalLink">Top</a>
<br />
<br />
<h2>Constant Values</h2>
<p>
<a id="constant1ValuesAnchor" onclick="toggleCollapse('constant1Values', 'constant1ValuesAnchor');" title="Collapse" class="collapseref">Collapse</a>
</p>
<div id="constant1Values">
<table>
<tr>
<th width="40%">Value</th>
<th width="60%">Destination Node</th>
</tr>
<tr>
<td>0000</td>
<td>PeuPartsOrders/Header/HeaderID1</td>
</tr>
<tr class="linkTableAltRow">
<td>GA</td>
<td>PeuPartsOrders/Header/HeaderID2</td>
</tr>
<tr>
<td>DPRYS</td>
<td>PeuPartsOrders/Header/HeaderID3</td>
</tr>
<tr class="linkTableAltRow">
<td>NORVE</td>
<td>PeuPartsOrders/Header/HeaderCountry</td>
</tr>
<tr>
<td>DPRYS</td>
<td>PeuPartsOrders/Header/HeaderID4</td>
</tr>
<tr class="linkTableAltRow">
<td>DCE</td>
<td>PeuPartsOrders/HeaderOrder/HO_ApplicationCode</td>
</tr>
<tr>
<td>C</td>
<td>PeuPartsOrders/HeaderOrder/HO_RequestType</td>
</tr>
<tr class="linkTableAltRow">
<td>01</td>
<td>PeuPartsOrders/HeaderOrder/HO_RecordCode</td>
</tr>
<tr>
<td>DCE</td>
<td>PeuPartsOrders/OrderLine/OL_ApplicationCode</td>
</tr>
<tr class="linkTableAltRow">
<td>C</td>
<td>PeuPartsOrders/OrderLine/OL_RequestType</td>
</tr>
<tr>
<td>10</td>
<td>PeuPartsOrders/OrderLine/OL_RecordCode</td>
</tr>
<tr class="linkTableAltRow">
<td>9999</td>
<td>PeuPartsOrders/Footer/FooterID1</td>
</tr>
<tr>
<td>GA</td>
<td>PeuPartsOrders/Footer/FooterID2</td>
</tr>
<tr class="linkTableAltRow">
<td>DPRYS</td>
<td>PeuPartsOrders/Footer/FooterID3</td>
</tr>
<tr>
<td>NORVE</td>
<td>PeuPartsOrders/Footer/FooterCountry</td>
</tr>
<tr class="linkTableAltRow">
<td>DPRYS</td>
<td>PeuPartsOrders/Footer/FooterID4</td>
</tr>
</table>
</div>
</body>
<script type="text/javascript">
				
	function toggleCollapse(obj, objAnchor) {
	var el = document.getElementById(obj);
	var elAnchor = document.getElementById(objAnchor);
	if ( el.style.display != "none" ) {
	  el.style.display = 'none';
	  elAnchor.innerHTML = 'Expand';
	}
	else {
	  el.style.display = '';
	  elAnchor.innerHTML = 'Collapse';
	}
	}
	
				</script>
</html>
